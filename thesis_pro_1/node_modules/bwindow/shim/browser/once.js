/**
 * Bind window event once
 * @function once
 * @param {string} event - Event to bind
 * @param {function} handler - Event handler
 * @returns {function} - Function to cancel the binding
 */
'use strict';

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var get = require('./get');

/** @lends once */
function once(event, handler) {
  var window = get('window', { strict: true });
  var binding = function onceWrap() {
    window.removeEventListener(event, binding);
    handler.apply(undefined, arguments);
  };
  window.addEventListener(event, binding);
  var cancel = function cancel() {
    return window.removeEventListener(event, binding);
  };
  return (0, _assign2.default)(cancel, { cancel: cancel });
}

module.exports = once;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwibmFtZXMiOlsiZ2V0IiwicmVxdWlyZSIsIm9uY2UiLCJldmVudCIsImhhbmRsZXIiLCJ3aW5kb3ciLCJzdHJpY3QiLCJiaW5kaW5nIiwib25jZVdyYXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNhbmNlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBT0E7Ozs7Ozs7O0FBRUEsSUFBTUEsTUFBTUMsUUFBUSxPQUFSLENBQVo7O0FBRUE7QUFDQSxTQUFTQyxJQUFULENBQWVDLEtBQWYsRUFBc0JDLE9BQXRCLEVBQStCO0FBQzdCLE1BQU1DLFNBQVNMLElBQUksUUFBSixFQUFjLEVBQUVNLFFBQVEsSUFBVixFQUFkLENBQWY7QUFDQSxNQUFJQyxVQUFVLFNBQVNDLFFBQVQsR0FBNEI7QUFDeENILFdBQU9JLG1CQUFQLENBQTJCTixLQUEzQixFQUFrQ0ksT0FBbEM7QUFDQUg7QUFDRCxHQUhEO0FBSUFDLFNBQU9LLGdCQUFQLENBQXdCUCxLQUF4QixFQUErQkksT0FBL0I7QUFDQSxNQUFJSSxTQUFTLFNBQVRBLE1BQVM7QUFBQSxXQUFNTixPQUFPSSxtQkFBUCxDQUEyQk4sS0FBM0IsRUFBa0NJLE9BQWxDLENBQU47QUFBQSxHQUFiO0FBQ0EsU0FBTyxzQkFBY0ksTUFBZCxFQUFzQixFQUFFQSxjQUFGLEVBQXRCLENBQVA7QUFDRDs7QUFFREMsT0FBT0MsT0FBUCxHQUFpQlgsSUFBakIiLCJmaWxlIjoib25jZS5qcyIsInNvdXJjZVJvb3QiOiJsaWIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJpbmQgd2luZG93IGV2ZW50IG9uY2VcbiAqIEBmdW5jdGlvbiBvbmNlXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgLSBFdmVudCB0byBiaW5kXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyIC0gRXZlbnQgaGFuZGxlclxuICogQHJldHVybnMge2Z1bmN0aW9ufSAtIEZ1bmN0aW9uIHRvIGNhbmNlbCB0aGUgYmluZGluZ1xuICovXG4ndXNlIHN0cmljdCdcblxuY29uc3QgZ2V0ID0gcmVxdWlyZSgnLi9nZXQnKVxuXG4vKiogQGxlbmRzIG9uY2UgKi9cbmZ1bmN0aW9uIG9uY2UgKGV2ZW50LCBoYW5kbGVyKSB7XG4gIGNvbnN0IHdpbmRvdyA9IGdldCgnd2luZG93JywgeyBzdHJpY3Q6IHRydWUgfSlcbiAgbGV0IGJpbmRpbmcgPSBmdW5jdGlvbiBvbmNlV3JhcCAoLi4uYXJncykge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBiaW5kaW5nKVxuICAgIGhhbmRsZXIoLi4uYXJncylcbiAgfVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgYmluZGluZylcbiAgbGV0IGNhbmNlbCA9ICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBiaW5kaW5nKVxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihjYW5jZWwsIHsgY2FuY2VsIH0pXG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVxuIl19